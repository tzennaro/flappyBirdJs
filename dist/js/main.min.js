"use strict";function appendTube(){var e=Math.floor(Math.random()*(.66*svgHeight-.33*svgHeight+1)+.33*svgHeight),i=svg.append("g").attr("id",function(){return"rect-"+id.toString()});i.append("rect").attr({"class":"tubeRectTop",x:svgWidth,y:0,height:e-tubeGap,width:tubeWidth,fill:"rgb(118,190,58)","stroke-width":2,stroke:"rgb(81,59,71)"}),i.append("rect").attr({"class":"tubeRectBot",x:svgWidth,y:e+tubeGap,height:svgHeight-e+2*tubeGap,width:tubeWidth,fill:"rgb(118,190,58)","stroke-width":2,stroke:"rgb(81,59,71)"}),moveRect(i)}function moveRect(t){t.selectAll("rect").transition().ease("linear").duration(1e3*rectSpeed).attr("x",function(){return-tubeWidth-2})}function gravityPull(t,e){e=t[0][0].y.baseVal.value,fall===!0&&svgHeight-birdHeight>e&&t.transition().duration(1e3*fallTime).ease("linear").attr({y:e+birdHeight}).each("end",function(){gravityPull(t,e)})}function birdBump(t){fall=!1,flightHeight=t[0][0].y.baseVal.value,t.attr("y",flightHeight-bumpUp),fall=!0}var svgWidth=400,svgHeight=600,tubeWidth=50,tubeGap=75,birdHeight=30,birdWidth=30,fallTime=.175,goUpTime=.25,rectSpawn=1.5,rectTime=5,rectSpeed=5,bumpUp=75,svg=d3.select("#mainContainer").append("svg").attr({width:svgWidth,height:svgHeight}),bird=svg.append("rect").attr({id:"bird",fill:"red",width:birdWidth,height:birdHeight,x:svgWidth/3-birdWidth/2,y:(svgHeight-birdHeight)/2}),flightHeight=bird[0][0].y.animVal.value;svg.append("text").attr({id:"scoreCounter",x:10,y:20,"pointer-events":"none","font-family":"sans-serif","font-weight":"bold","font-size":"15px","text-anchor":"start",fill:"black"}).text("score: ");var mainText=svg.append("text").attr({id:"clickToStart",x:svgWidth/2,y:svgHeight/2,"pointer-events":"none","font-family":"sans-serif","font-weight":"bold","font-size":"30px","text-anchor":"middle",fill:"white",stroke:"black","stroke-width":2});mainText.text("TAP TO START");var id=0,start=!1,gameOver=!1,fall=!1;d3.select("html").on("click",function(){start=!0,fall=!0,mainText.text(""),birdBump(bird),gravityPull(bird,flightHeight)}),setInterval(function(){id+=1,start===!0&&(appendTube(),svg.select("#rect-"+(id-rectTime).toString()).remove(),svg.selectAll(".tubeRectTop").each(function(t){this.x.baseVal.value<=svgWidth/3+birdWidth&&this.x.baseVal.value>=svgWidth/3-tubeWidth&&flightHeight<=this.height.baseVal.value&&(console.log("you lost - TOP"),mainText.text("GAME OVER"),d3.select("html").on("click",function(){}))}),svg.selectAll(".tubeRectBot").each(function(t){this.x.baseVal.value<=svgWidth/3+birdWidth&&this.x.baseVal.value>=svgWidth/3-tubeWidth&&flightHeight>=this.y.baseVal.value&&(console.log("you lost - BOT"),mainText.text("GAME OVER"),d3.select("html").on("click",function(){}))}))},1e3*rectSpawn),setInterval(function(){start===!0&&rectSpeed>=1.25&&(rectSpeed-=.15)},1500),setInterval(function(){flightHeight=bird[0][0].y.animVal.value},50);
